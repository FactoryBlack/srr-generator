<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I Wanna Lockpick Puzzle Solver</title>
    <style>
        .console-output {
            width: 100%;
            height: 300px;
            overflow-y: auto;
            background-color: #333;
            color: #eee;
            font-family: monospace;
            padding: 10px;
            border: 1px solid #222;
            white-space: pre-line;
        }

        #startButton {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<h1>I Wanna Lockpick Puzzle Solver</h1>
<button id="startButton">Start Solver</button>
<div id="log" class="console-output"></div>

<script>
// Initial puzzle data
const puzzleData = {
    keys: {
        green: { real: 0, imag: 0 },
        red: { real: 0, imag: 0 },
        cyan: { real: 0, imag: 0 },
        brown: { real: 0, imag: 0 },
        blue: { real: 0, imag: 0 }
    },
    doors: [
        { color: 'eroded', type: 'eroded', copies: 1, locks: [], corrupted: true } // Only eroded door for this test
    ],
    keysToCollect: [
        { color: 'green', amount: { real: 5, imag: 0 } } // Only green keys to trigger green aura
    ],
    goal: { reached: false }
};

let logDiv = document.getElementById("log");

// Function to log messages with auto-scroll
function logMessage(message) {
    const messageElement = document.createElement("div");
    messageElement.textContent = message;
    logDiv.appendChild(messageElement);
    logDiv.scrollTop = logDiv.scrollHeight;
}

// Function to collect keys and log
function collectKey(data, color, amount) {
    data.keys[color].real += amount.real;
    logMessage(`Collected ${amount.real} ${color} key(s). Total: ${data.keys[color].real}`);
}

// Function to check aura activation
function checkAuras(data) {
    let greenAuraActive = false;
    if (data.keys.green.real >= 5) {
        logMessage("Green aura activated!");
        greenAuraActive = true;
    }
    return greenAuraActive;
}

// Function to open eroded door with green aura check
function openErodedDoor(data, greenAuraActive) {
    const erodedDoor = data.doors[0];
    logMessage(`Attempting to open eroded door, corrupted: ${erodedDoor.corrupted}, greenAuraActive: ${greenAuraActive}`);

    if (erodedDoor.corrupted && greenAuraActive) {
        erodedDoor.corrupted = false;
        logMessage("Eroded door successfully healed with green aura.");
    } else if (erodedDoor.corrupted && !greenAuraActive) {
        logMessage("Failed to heal eroded door. Green aura not active.");
    }
}

// Main function to simulate the test
function cursedDoorTest() {
    logMessage("Starting eroded door test...");

    const testData = JSON.parse(JSON.stringify(puzzleData));

    // Collect green keys to activate green aura
    for (const key of testData.keysToCollect) {
        collectKey(testData, key.color, key.amount);
    }

    // Check if green aura is active
    const greenAuraActive = checkAuras(testData);

    // Try opening the eroded door
    openErodedDoor(testData, greenAuraActive);

    // Final goal check
    if (!testData.doors[0].corrupted) {
        logMessage("Test succeeded: Eroded door is open.");
    } else {
        logMessage("Test failed: Eroded door remains closed.");
    }
}

// Add event listener to the button to start the test
document.getElementById("startButton").addEventListener("click", cursedDoorTest);

</script>
</body>
</html>
